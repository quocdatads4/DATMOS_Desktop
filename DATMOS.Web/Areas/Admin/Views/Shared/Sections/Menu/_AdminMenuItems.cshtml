@* Admin Menu Items *@
<!-- Menu -->
<aside id="layout-menu" class="layout-menu-horizontal menu-horizontal menu flex-grow-0">
  <div class="container-xxl d-flex h-100">
    <ul class="menu-inner">
      <!-- Dashboard -->
      <li class="menu-item @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Home" ? "active" : "")">
        <a asp-area="Admin" asp-controller="Home" asp-action="Index" class="menu-link">
          <i class="menu-icon icon-base ti ti-smart-home"></i>
          <div>Tổng quan</div>
        </a>
      </li>

      <!-- Quản lý Khóa học -->
      <li class="menu-item @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Courses" || ViewContext.RouteData.Values["Controller"]?.ToString() == "Lessons" ? "active" : "")">
        <a href="javascript:void(0)" class="menu-link menu-toggle">
          <i class="menu-icon icon-base ti ti-book"></i>
          <div>Khóa học</div>
        </a>
        <ul class="menu-sub">
          <li class="menu-item">
            <a asp-area="Admin" asp-controller="Courses" asp-action="Index" class="menu-link" data-no-toggle="true" onclick="console.log('Courses link clicked'); return true;">
              <i class="menu-icon icon-base ti ti-list"></i>
              <div>Danh sách khóa học</div>
            </a>
          </li>
          <li class="menu-item">
            <a asp-area="Admin" asp-controller="Lessons" asp-action="Index" class="menu-link" data-no-toggle="true">
              <i class="menu-icon icon-base ti ti-notebook"></i>
              <div>Quản lý bài học</div>
            </a>
          </li>
          <li class="menu-item">
            <a href="#" class="menu-link">
              <i class="menu-icon icon-base ti ti-file-description"></i>
              <div>Tài liệu học tập</div>
            </a>
          </li>
        </ul>
      </li>

      <!-- Quản lý Sản phẩm -->
      <li class="menu-item @(ViewContext.RouteData.Values["Controller"]?.ToString() == "AdminProduct" ? "active" : "")">
        <a href="javascript:void(0)" class="menu-link menu-toggle">
          <i class="menu-icon icon-base ti ti-package"></i>
          <div>Sản phẩm</div>
        </a>
        <ul class="menu-sub">
          <li class="menu-item">
            <a asp-area="Admin" asp-controller="AdminProduct" asp-action="Index" class="menu-link" data-no-toggle="true">
              <i class="menu-icon icon-base ti ti-list"></i>
              <div>Danh sách sản phẩm</div>
            </a>
          </li>
          <li class="menu-item">
            <a asp-area="Admin" asp-controller="AdminProduct" asp-action="Create" class="menu-link" data-no-toggle="true">
              <i class="menu-icon icon-base ti ti-plus"></i>
              <div>Thêm sản phẩm mới</div>
            </a>
          </li>
        </ul>
      </li>

      <!-- Quản lý Người dùng -->
      <li class="menu-item @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Users" ? "active" : "")">
        <a href="javascript:void(0)" class="menu-link menu-toggle">
          <i class="menu-icon icon-base ti ti-users"></i>
          <div>Người dùng</div>
        </a>
        <ul class="menu-sub">
          <li class="menu-item">
            <a asp-area="Admin" asp-controller="Users" asp-action="Index" class="menu-link" data-no-toggle="true">
              <i class="menu-icon icon-base ti ti-user"></i>
              <div>Danh sách học viên</div>
            </a>
          </li>
        </ul>
      </li>

      <!-- Hệ thống (Placeholder - có thể bổ sung controller sau) -->
      <li class="menu-item">
        <a href="javascript:void(0)" class="menu-link menu-toggle">
          <i class="menu-icon icon-base ti ti-settings"></i>
          <div>Hệ thống</div>
        </a>
        <ul class="menu-sub">
          <li class="menu-item">
            <a href="#" class="menu-link">
              <i class="menu-icon icon-base ti ti-settings-cog"></i>
              <div>Cấu hình chung</div>
            </a>
          </li>
          <li class="menu-item">
            <a href="#" class="menu-link">
              <i class="menu-icon icon-base ti ti-file-analytics"></i>
              <div>Logs hệ thống</div>
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</aside>
<!-- / Menu -->

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Ensure links with data-no-toggle="true" work properly
        const menuLinks = document.querySelectorAll('.menu-link[data-no-toggle="true"]');
        menuLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                // Allow the link to work normally
                console.log('Menu link clicked:', this.href);
                // Don't prevent default - let the link navigate
            });
            
            // Also prevent menu.js from interfering
            link.classList.add('no-menu-toggle');
        });
        
        // Override menu.js click handler for these links
        const originalMenuClick = window.Menu && window.Menu.prototype && window.Menu.prototype._evntElClick;
        if (originalMenuClick) {
            // We can't easily override the minified code, so we'll add our own event listener
            // that stops propagation for these links
            document.querySelectorAll('#layout-menu .menu-inner').forEach(menuInner => {
                menuInner.addEventListener('click', function(e) {
                    const link = e.target.closest('.menu-link[data-no-toggle="true"]');
                    if (link) {
                        e.stopPropagation();
                        // Allow default behavior
                        return true;
                    }
                }, true); // Use capture phase to run before menu.js
            });
        }
    });
</script>
